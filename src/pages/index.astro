---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import About from "../components/About.astro";
import fetchApi from "../lib/strapi";

const pages = await fetchApi({
  endpoint: 'pages',
  page: 'LandingPage',
  wrappedByKey: 'data',
});

// URL: http://localhost:1337/api/pages?populate[LandingPage][populate]=*
// URL: http://localhost:1337/api/pages?populate=*

//https://shining-garden-49c23e71e6.strapiapp.com/api/pages?populate[LandingPage][populate]=*

const landingPage = pages[0];
const pageData = landingPage?.LandingPage || [];

const heroData = pageData.find(pd => pd.__component === "hero.hero") || {};
const { heroText, heroDescription } = heroData;


// const { bannerimg: {
// 	url: bannerImg
// }} = heroData;

// const { bannerimg: {
// 	url: alternativeText
// }} = heroData;

const aboutData = pageData.find(pd => pd.__component === "about.about") || {};
const { aboutText } = aboutData;


const { aboutPhoto: {
	url: aboutPhoto
}} = aboutData;

const { aboutPhoto: {
	alternativeText: altText
}} = aboutData;

// const aboutPhoto = aboutData?.aboutPhoto?.url || "";
// const altText = aboutData?.aboutPhoto?.alternativeText || "";
---

<Layout>
  <Hero {heroText} {heroDescription}  />
  <About {aboutText} {aboutPhoto} {altText}/>
</Layout>
